<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="Description" content="Enter your description here" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
    <link rel="stylesheet" href="/orderEdit.css">
    <title>Admin | Edit Order</title>
</head>

<body>
    <script>
        function alertJS() {
            var alertMsg = document.getElementById("alertMsg");
            setTimeout(function () { alertMsg.classList.add("d-none") }, 3000);
        };
    </script>
    <!-- navbar -->
    <section id="navbar">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="/">Lets Buy Shoes!</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="/admin">Admin <span class="sr-only"></span></a>
                    </li>
                </ul>
                <ul class="navbar-nav">

                    <li class="nav-item">
                        <a class="nav-link" href="/logout">Log out</a>
                    </li>

                </ul>

            </div>
        </nav>

    </section>

    <!--All alerts  -->
    <%- include("../views/partials/alerts") %>



    <section id="header">
        <div class="container-fluid px-0 mx-0 ">
            <p class="text-center py-3 mb-0">Edit order</p>
        </div>
    </section>

    <!-- All info here -->

    <section>
        <div class="container mt-2">
            <div class="row justify-content-center mt-4">

                <div class="col-8">
                    <h3>Order ID: <%= order._id %></h3>
                    <h4>Customer Name: <%= order.buyer.username %></h4>
                    <h4 class="mb-3">Contact Details: <%= order.buyer.phone %></h4>
                    <%let count=1;
                    order.cart.forEach(function(item){ %>

                    <div class="card my-3">
                        <div class="card-body">
                            <h3 class="card-title"><%=item.productName%></h3>
                            <form action="/order/edit/cart/<%=item._id%>?_method=PUT" method="POST">

                                <div class="form-group">
                                    <small class="text-danger">Please ensure that the product and its corresponding size exists in the inventory</small>
                                    <br>
                                    <label>Size</label>
                                    <select name="cart[size]" class="form-control">
                                        <option selected><%=item.size%></option>
                                        <option>Small</option>
                                        <option>Medium</option>
                                        <option>Large</option>
                                        <option>Extra large</option>
                                    </select>
                                </div>


                                <div class="form-group">
                                    <label>Price</label>
                                    <input type="Number" class="form-control" value="<%=item.amount%>"
                                        name="cart[amount]">
                                </div>

                                <button type="submit" class="btn btn-success">Submit</button>
                            </form>
                        </div>

                    </div>



                    <%
                    })
                    %>
                </div>
            </div>



        </div>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>

</body>

</html>